#
# Copyright (c) Microsoft Corporation
# Licensed under the MIT License.
#
name : changelog

on:
  # manual only
  workflow_dispatch:

jobs:
  changelog:
    name: changelog
    runs-on: ubuntu-latest

    container:
      image: xpillons/hpcrover:latest
      options: --user 0

    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true
         
      - name: "Build Changelog"
        id: build_changelog
        uses: mikepenz/release-changelog-builder-action@v1.7.3
        with:
          configuration: ".github/workflows/changelog_configuration.json"
          ignorePreReleases: "false"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: "Dump Changelog"
        run: |
          echo ${{steps.build_changelog.outputs.changelog}}
