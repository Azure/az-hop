---
# This looks crazy but in order for this playbook to run from a pipeline, the jumpbox dummy need to be added
- name: jumpbox dummy
  hosts: jumpbox
  become: true

- name: Run test suite
  hosts: ondemand
  become: true
  vars_files:
    - '{{global_config_file}}'

  tasks:
  - name: Call tests role
    include_role:
      name: tests
    vars:
      scheduler: '{{ queue_manager | default("openpbs") }}'
